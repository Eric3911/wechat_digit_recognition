# 微信数字识别小程序

![](https://raw.githubusercontent.com/ypwhs/resources/master/WechatIMG57.jpeg)

## 需要的库

* [itchat 1.1.11](https://github.com/littlecodersh/ItChat)
* [OpenCV 3.1.0](https://github.com/opencv/opencv)
* [tensorflow 0.10.0rc0](https://github.com/tensorflow/tensorflow/tree/v0.10.0rc0)
* [keras 1.1.0](https://github.com/fchollet/keras)

OpenCV 建议用 brew 安装。

```shell
brew install opencv3 --HEAD
```

## 思路

### 预处理

将图片转灰度，自适应二值化，提取轮廓，寻找最小矩形边界，判断是否满足基本条件。

### 缩放

将满足条件的图片缩放至最大边长为28，将其放入一个28*28的白色图像的中心位置。

### 预测

将处理好的图片通过深度神经网络中运算，得到识别的结果。11类是因为0~9代表各个数字，10代表非数字。网络结构如下：

784->512->512->11

```
____________________________________________________________________________________________________
Layer (type)                     Output Shape          Param #     Connected to
====================================================================================================
dense_1 (Dense)                  (None, 512)           401920      dense_input_1[0][0]
____________________________________________________________________________________________________
activation_1 (Activation)        (None, 512)           0           dense_1[0][0]
____________________________________________________________________________________________________
dropout_1 (Dropout)              (None, 512)           0           activation_1[0][0]
____________________________________________________________________________________________________
dense_2 (Dense)                  (None, 512)           262656      dropout_1[0][0]
____________________________________________________________________________________________________
activation_2 (Activation)        (None, 512)           0           dense_2[0][0]
____________________________________________________________________________________________________
dropout_2 (Dropout)              (None, 512)           0           activation_2[0][0]
____________________________________________________________________________________________________
dense_3 (Dense)                  (None, 11)            5643        dropout_2[0][0]
____________________________________________________________________________________________________
activation_3 (Activation)        (None, 11)            0           dense_3[0][0]
====================================================================================================
Total params: 670219
____________________________________________________________________________________________________
```

### 微信

收到任何人发过来的图片以后，下载它，然后识别，保存标记识别好的数字的图片，发送给刚才发图片的人。

![](https://raw.githubusercontent.com/ypwhs/resources/master/WechatIMG50.jpg)